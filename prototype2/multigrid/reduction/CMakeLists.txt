set(TEST_DATA_PATH "${REFDATA}/multigrid/2018_09_03")
if(EXISTS ${TEST_DATA_PATH})
  set(MGReductionTest_SRC
    Reduction.cpp
    ReductionTest.cpp
    ../generators/BuilderReadouts.cpp
    ../generators/ReaderReadouts.cpp
    ../mesytec/Readout.cpp
    ../MgConfig.cpp
    )
  set(MGReductionTest_INC
    Reduction.h
    ../generators/BuilderReadouts.h
    ../generators/ReaderReadouts.h
    ../../common/Buffer.h
    ../mesytec/Readout.h
    ../geometry/SequoiaGeometry.h
    ../MgConfig.h
    )
  create_test_executable(MGReductionTest)
  target_compile_definitions(MGReductionTest
    PRIVATE TEST_DATA_PATH="${TEST_DATA_PATH}/")
else()
  message(WARNING "*** No multigrid reference data found. Skipping MGReduction tests.")
endif()

set(EfuMaximumTest_SRC
  ../../common/Hists.cpp
  ../../common/ReadoutSerializer.cpp
  ../mesytec/Readout.cpp
  EfuMaximumTest.cpp
  EfuMaximum.cpp
  )
set(EfuMaximumTest_INC
  ../../common/Hists.h
  ../../common/ReadoutSerializer.h
  ../mesytec/Readout.h
  ../geometry/SequoiaGeometry.h
  Efu.h
  EfuMaximum.h
  )
create_test_executable(EfuMaximumTest)

set(EfuCenterMassTest_SRC
  ../../common/Hists.cpp
  ../../common/ReadoutSerializer.cpp
  ../mesytec/Readout.cpp
  EfuCenterMassTest.cpp
  EfuCenterMass.cpp
  )
set(EfuCenterMassTest_INC
  ../../common/Hists.h
  ../../common/ReadoutSerializer.h
  ../mesytec/Readout.h
  ../geometry/SequoiaGeometry.h
  Efu.h
  EfuCenterMass.h
  )
create_test_executable(EfuCenterMassTest)

set(EfuPrioritizedTest_SRC
  ../../common/Hists.cpp
  ../../common/ReadoutSerializer.cpp
  ../mesytec/Readout.cpp
  EfuPrioritizedTest.cpp
  EfuPrioritized.cpp
  )
set(EfuPrioritizedTest_INC
  ../../common/Hists.h
  ../../common/ReadoutSerializer.h
  ../mesytec/Readout.h
  ../geometry/SequoiaGeometry.h
  Efu.h
  EfuCenterMass.h
  )
create_test_executable(EfuPrioritizedTest)

set(MGEventAnalysisTest_SRC
  ../../common/clustering/Hit.cpp
  ../../common/clustering/Event.cpp
  EventAnalysisTest.cpp
  EventAnalysis.cpp
  )
set(MGEventAnalysisTest_INC
  ../../common/clustering/Hit.h
  ../../common/clustering/Event.h
  ../geometry/SequoiaGeometry.h
  EventAnalysis.h
  )
create_test_executable(MGEventAnalysisTest)
